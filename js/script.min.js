document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".header"),t=document.querySelector(".address__map");function o(){if(window.innerWidth>=768){const e=document.querySelector(".sale");e.dataset.src="img/3/sale-bg.webp",e.classList.add("b-lazy");const t=document.querySelector(".request");t.dataset.src="img/7/request-bg.webp",t.classList.add("b-lazy")}}!function(){const e=document.querySelector(".header-info__order"),t=document.querySelector(".sale-form__button"),o=document.querySelector(".request-form__button"),s=document.querySelectorAll(".form__button"),c=document.querySelectorAll(".modal"),n=document.querySelector("#form-order"),a=document.querySelector("#thank-you");let d=!1;const r=window.innerWidth-document.documentElement.clientWidth,i=()=>new Promise(e=>{d||(d=!0,e())}),l=()=>{document.body.classList.add("_lock"),document.body.style.paddingRight=r+"px"};let u=null;const m=e=>{if(e.target.classList.contains("form__button")||e.target.classList.contains("request-form__button")){const t=e.target.form.phone_number;if(!t.value||t.validity.patternMismatch)return;i().then(()=>{l(),e.preventDefault(),e.target.closest(".modal")||(u=e.target),n.classList.contains("active")?(n.classList.remove("active"),n.tabIndex="",setTimeout(()=>{a.classList.add("active"),a.tabIndex="0",t.form.reset(),d=!1,setTimeout(()=>{a.focus()},500)},500)):(a.classList.add("active"),a.tabIndex="0",t.form.reset(),setTimeout(()=>{d=!1,a.focus()},500))})}else i().then(()=>{l(),e.preventDefault(),n.classList.add("active"),n.tabIndex="0",u=e.target,setTimeout(()=>{n.focus(),d=!1,n.querySelector(".form__input").focus()},500)})},f=e=>{(e.target.classList.contains("modal")||e.target.closest(".modal__close"))&&i().then(()=>{const t=e.target.closest(".modal");t.classList.remove("active"),t.tabIndex="",setTimeout(()=>{document.body.classList.remove("_lock"),document.body.style.paddingRight="",d=!1,u.focus()},500)})};e.addEventListener("click",m),t.addEventListener("click",m),o.addEventListener("click",m),s.forEach(e=>e.addEventListener("click",m)),c.forEach(e=>e.addEventListener("click",f))}(),o(),window.addEventListener("resize",o);let s=!1;var c,n;window.addEventListener("scroll",()=>{if(document.documentElement.scrollTop>=document.documentElement.clientHeight?(window.oldY>pageYOffset?e.classList.remove("hide"):e.classList.add("hide"),window.oldY=pageYOffset):e.classList.contains("hide")&&e.classList.remove("hide"),!s&&pageYOffset>=2400){s=!0;const e=document.createElement("script");e.src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A74187c33f5f8c79e595b0316d1110f57e06e5b8205f517e5b89859963505883b&amp;width=100%&amp;height=320&amp;lang=ru_RU&amp;scroll=true",e.type="text/javascript",t.append(e)}}),c=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(n=new Image).onload=n.onerror=function(){c(2==n.height)},n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});